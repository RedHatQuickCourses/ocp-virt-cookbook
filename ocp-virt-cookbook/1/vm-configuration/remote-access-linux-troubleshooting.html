<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Troubleshooting Remote Access to Linux VMs :: OpenShift Virtualization cookbook</title>
    <link rel="prev" href="remote-access-linux-vms.html">
    <link rel="next" href="remote-access-windows-vms.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">OpenShift Virtualization cookbook</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/ocp-virt-cookbook/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ocp-virt-cookbook" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">OpenShift Virtualization cookbook</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../getting-started/index.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/prerequisites.html">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/install-openshift-virtualization.html">Install OpenShift Virtualization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/default-storage-class.html">Storage Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/create-vm-web-console.html">Create VM from Web Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/virtctl-basics.html">Virtctl Basics</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../storage/index.html">Storage Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/lvm-operator.html">LVM Operator Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../storage/lvm-troubleshooting.html">LVM Troubleshooting</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../networking/index.html">Networking Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/udn-primary-networks.html">UDN Primary Networks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/localnet-secondary.html">Localnet Secondary Networks with CUDN</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/localnet-vlan.html">Localnet Secondary Networks with VLAN using NAD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/cudn-localnet-vlan.html">Localnet VLAN with CUDN</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/linux-bridges.html">Linux Bridges</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/ovs-bridge-troubleshooting.html">Troubleshooting Localnet Networks</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Virtual Machine Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cloud-init-ip-configuration.html">Cloud-init IP Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cloud-init-troubleshooting.html">Cloud-init Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="internal-dns-for-vms.html">Internal DNS for VMs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="remote-access-linux-vms.html">Remote Access to Linux VMs</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="remote-access-linux-troubleshooting.html">Remote Access to Linux VMs Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="remote-access-windows-vms.html">Remote Access to Windows VMs via RDP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="custom-golden-images.html">Custom Golden Images</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="golden-images-troubleshooting.html">Golden Images Troubleshooting</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../manifests/index.html">Manifests</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../api/index.html">API Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/api_component_overview.html">API Component Overview</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../lab-env/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/glossary.html">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenShift Virtualization cookbook</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">OpenShift Virtualization cookbook</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">OpenShift Virtualization cookbook</a></li>
    <li><a href="index.html">Virtual Machine Configuration</a></li>
    <li><a href="remote-access-linux-troubleshooting.html">Remote Access to Linux VMs Troubleshooting</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Troubleshooting Remote Access to Linux VMs</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide provides troubleshooting steps, verification commands, and solutions for issues related to remote access to Linux VMs in OpenShift Virtualization.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_table_of_contents"><a class="anchor" href="#_table_of_contents"></a>Table of Contents</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#_quick_health_checks">Quick Health Checks</a></p>
</li>
<li>
<p><a href="#_method_1_console_access">Method 1: Console Access</a></p>
</li>
<li>
<p><a href="#_method_2_vnc_access">Method 2: VNC Access</a></p>
</li>
<li>
<p><a href="#_method_3_ssh_via_virtctl">Method 3: SSH via virtctl</a></p>
</li>
<li>
<p><a href="#_method_4_ssh_via_nodeport_service">Method 4: SSH via NodePort Service</a></p>
</li>
<li>
<p><a href="#_method_5_ssh_via_loadbalancer">Method 5: SSH via LoadBalancer</a></p>
</li>
<li>
<p><a href="#_method_6_ssh_via_port_forward">Method 6: SSH via Port Forward</a></p>
</li>
<li>
<p><a href="#_method_7_direct_access_via_secondary_network">Method 7: Direct Access via Secondary Network</a></p>
</li>
<li>
<p><a href="#_diagnostic_commands">Diagnostic Commands</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quick_health_checks"><a class="anchor" href="#_quick_health_checks"></a>Quick Health Checks</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_check_vm_status"><a class="anchor" href="#_check_vm_status"></a>Check VM Status</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get vm &lt;vm-name&gt; -n &lt;namespace&gt;
oc get vmi &lt;vm-name&gt; -n &lt;namespace&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected output for running VM:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">NAME        AGE   STATUS    READY
my-vm       5m    Running   True</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_check_vm_has_ip_address"><a class="anchor" href="#_check_vm_has_ip_address"></a>Check VM Has IP Address</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get vmi &lt;vm-name&gt; -n &lt;namespace&gt; -o jsonpath='{.status.interfaces[*].ipAddress}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Should return at least one IP address.</p>
</div>
</div>
<div class="sect2">
<h3 id="_check_vm_pod_is_running"><a class="anchor" href="#_check_vm_pod_is_running"></a>Check VM Pod is Running</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods -n &lt;namespace&gt; -l kubevirt.io/domain=&lt;vm-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expected output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">NAME                       READY   STATUS    RESTARTS   AGE
virt-launcher-&lt;vm&gt;-xxxxx   3/3     Running   0          5m</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_check_guest_agent_status"><a class="anchor" href="#_check_guest_agent_status"></a>Check Guest Agent Status</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get vmi &lt;vm-name&gt; -n &lt;namespace&gt; -o jsonpath='{.status.guestOSInfo.id}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>If empty, guest agent is not running. NOTE: The guest agent is not required for basic access methods (console, VNC, SSH, port-forward, NodePort, LoadBalancer, secondary network). It provides additional information like guest OS details and enables features like dynamic SSH key injection.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_method_1_console_access"><a class="anchor" href="#_method_1_console_access"></a>Method 1: Console Access</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_issue_cannot_connect_to_console"><a class="anchor" href="#_issue_cannot_connect_to_console"></a>Issue: Cannot Connect to Console</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ virtctl console my-vm -n my-namespace
Error: unable to connect to console</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Check VM is running
oc get vm my-vm -n my-namespace

# Check VMI exists
oc get vmi my-vm -n my-namespace

# Check virt-launcher pod
oc get pods -n my-namespace -l kubevirt.io/domain=my-vm</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- VM is not running
- VMI not created
- virt-launcher pod not running
- Network issues between client and API server</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start VM if stopped:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">virtctl start my-vm -n my-namespace</code></pre>
</div>
</div>
</li>
<li>
<p>Wait for VMI to be ready:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc wait --for=condition=Ready vmi/my-vm -n my-namespace --timeout=60s</code></pre>
</div>
</div>
</li>
<li>
<p>Check virt-launcher pod logs:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc logs -n my-namespace -l kubevirt.io/domain=my-vm</code></pre>
</div>
</div>
</li>
<li>
<p>Verify virtctl version matches cluster:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">virtctl version
oc get kubevirt -n openshift-cnv -o jsonpath='{.items[0].status.observedKubeVirtVersion}'</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_issue_console_connected_but_no_login_prompt"><a class="anchor" href="#_issue_console_connected_but_no_login_prompt"></a>Issue: Console Connected But No Login Prompt</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:
Console connects but shows blank screen or no prompt.</p>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Try sending Enter key
# Press Enter multiple times</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- VM still booting
- Serial console not configured in VM
- systemd-getty not running on ttyS0</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Wait for VM to fully boot (check VMI phase):</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get vmi my-vm -n my-namespace -o jsonpath='{.status.phase}'</code></pre>
</div>
</div>
</li>
<li>
<p>Check guest OS has serial console enabled:</p>
<div class="ulist">
<ul>
<li>
<p>For RHEL/Fedora: <code>systemctl status serial-getty@ttyS0.service</code></p>
</li>
<li>
<p>Cloud images typically have this enabled by default</p>
</li>
</ul>
</div>
</li>
<li>
<p>Try disconnect and reconnect:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Press Ctrl+] to disconnect
virtctl console my-vm -n my-namespace</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_issue_cannot_login_at_console"><a class="anchor" href="#_issue_cannot_login_at_console"></a>Issue: Cannot Login at Console</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:
Login prompt appears but credentials do not work.</p>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- Wrong username/password
- Cloud-init SSH-only access configured
- Root login disabled</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>For cloud images, use cloud-init to set password:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">cloudInitNoCloud:
  userData: |
    #cloud-config
    user: fedora
    password: mypassword
    chpasswd:
      expire: false</code></pre>
</div>
</div>
</li>
<li>
<p>Or use SSH key authentication and access via console with key</p>
</li>
<li>
<p>Check cloud-init logs inside VM for user creation errors</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_method_2_vnc_access"><a class="anchor" href="#_method_2_vnc_access"></a>Method 2: VNC Access</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_issue_virtctl_vnc_command_not_working"><a class="anchor" href="#_issue_virtctl_vnc_command_not_working"></a>Issue: virtctl vnc Command Not Working</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ virtctl vnc my-vm -n my-namespace
Error: VNC is not configured for this VM</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Check if graphics is enabled
oc get vm my-vm -n my-namespace -o jsonpath='{.spec.template.spec.domain.devices.autoattachGraphicsDevice}'

# Check VM devices configuration
oc get vm my-vm -n my-namespace -o yaml | grep -A 10 "devices:"</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- Graphics device disabled via <code>autoattachGraphicsDevice: false</code>
- VM spec explicitly excludes graphics device</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:
. Ensure graphics device is enabled (it is enabled by default in OpenShift Virtualization). If explicitly disabled, remove the <code>autoattachGraphicsDevice: false</code> setting or set it to <code>true</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_issue_vnc_viewer_cannot_connect"><a class="anchor" href="#_issue_vnc_viewer_cannot_connect"></a>Issue: VNC Viewer Cannot Connect</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:
virtctl vnc command starts but VNC viewer cannot connect.</p>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Check virtctl output for port number
virtctl vnc my-vm -n my-namespace
# Shows: "VNC connection on port 5900"

# Check if port is listening
netstat -tuln | grep 5900</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- Firewall blocking VNC port
- VNC viewer not installed or wrong viewer
- Port conflict</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install VNC viewer:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Linux
sudo dnf install tigervnc

# macOS
brew install tiger-vnc</code></pre>
</div>
</div>
</li>
<li>
<p>Connect to localhost:5900 or 127.0.0.1:5900</p>
</li>
<li>
<p>If port conflict, virtctl will use next available port (5901, 5902, etc.)</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_issue_vnc_connected_but_blank_screen"><a class="anchor" href="#_issue_vnc_connected_but_blank_screen"></a>Issue: VNC Connected But Blank Screen</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:
VNC connects but shows blank or black screen.</p>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- VM still booting
- No display manager running
- VM is console-only (no GUI)</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Wait for VM to fully boot</p>
</li>
<li>
<p>Check if VM has GUI installed:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Inside VM
systemctl status gdm  # For GNOME
systemctl status lightdm  # For other DEs</code></pre>
</div>
</div>
</li>
<li>
<p>For VMs without GUI, use console access instead</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_method_3_ssh_via_virtctl"><a class="anchor" href="#_method_3_ssh_via_virtctl"></a>Method 3: SSH via virtctl</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_issue_virtctl_ssh_command_fails"><a class="anchor" href="#_issue_virtctl_ssh_command_fails"></a>Issue: virtctl ssh Command Fails</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ virtctl ssh fedora@my-vm -n my-namespace
Error: SSH is not available for this VM</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Check VM has IP address
oc get vmi my-vm -n my-namespace -o jsonpath='{.status.interfaces}'

# Check SSH service in VM (via console)
virtctl console my-vm -n my-namespace
# Inside VM: systemctl status sshd</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- SSH service not running in VM
- No IP address assigned to VM
- SSH not installed in VM
- Network connectivity issues</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install and enable SSH in VM:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Inside VM via console
sudo dnf install openssh-server
sudo systemctl enable --now sshd</code></pre>
</div>
</div>
</li>
<li>
<p>Verify VM has IP address:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get vmi my-vm -n my-namespace -o jsonpath='{.status.interfaces[0].ipAddress}'</code></pre>
</div>
</div>
</li>
<li>
<p>Test SSH connectivity:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Try port-forward method first
oc port-forward vmi/my-vm -n my-namespace 2222:22 &amp;
ssh -p 2222 fedora@localhost</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_issue_virtctl_ssh_connects_but_authentication_fails"><a class="anchor" href="#_issue_virtctl_ssh_connects_but_authentication_fails"></a>Issue: virtctl ssh Connects But Authentication Fails</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ virtctl ssh fedora@my-vm -n my-namespace
fedora@my-vm: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Check SSH keys
ls -la ~/.ssh/

# Try with password authentication
virtctl ssh --local-ssh-opts="-o PreferredAuthentications=password" fedora@my-vm -n my-namespace</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- SSH public key not in VM&#8217;s authorized_keys
- Wrong username
- SSH key passphrase required</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add SSH key via cloud-init:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">cloudInitNoCloud:
  userData: |
    #cloud-config
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EA... user@host</code></pre>
</div>
</div>
</li>
<li>
<p>Or manually add key inside VM:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mkdir -p ~/.ssh
echo "ssh-rsa AAAAB3..." &gt;&gt; ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys</code></pre>
</div>
</div>
</li>
<li>
<p>Check username - default for Fedora is <code>fedora</code>, RHEL is <code>cloud-user</code> or <code>ec2-user</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_issue_virtctl_ssh_very_slow"><a class="anchor" href="#_issue_virtctl_ssh_very_slow"></a>Issue: virtctl ssh Very Slow</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:
Connection takes 30+ seconds to establish.</p>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- DNS reverse lookup timeout
- GSSAPI authentication attempt</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:
Add SSH options to skip slow authentication methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">virtctl ssh --local-ssh-opts="-o GSSAPIAuthentication=no -o UseDNS=no" fedora@my-vm -n my-namespace</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_method_4_ssh_via_nodeport_service"><a class="anchor" href="#_method_4_ssh_via_nodeport_service"></a>Method 4: SSH via NodePort Service</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_issue_nodeport_service_not_accessible"><a class="anchor" href="#_issue_nodeport_service_not_accessible"></a>Issue: NodePort Service Not Accessible</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ssh -p 30022 fedora@&lt;node-ip&gt;
ssh: connect to host &lt;node-ip&gt; port 30022: Connection refused</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Check service exists
oc get svc -n my-namespace

# Check service endpoints
oc get endpoints my-vm-ssh -n my-namespace

# Check NodePort assigned
oc get svc my-vm-ssh -n my-namespace -o jsonpath='{.spec.ports[0].nodePort}'</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- Service not created
- Wrong NodePort number
- VM pod not running or not ready
- Firewall blocking NodePort
- SSH not listening in VM</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify Service configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: Service
metadata:
  name: my-vm-ssh
spec:
  type: NodePort
  selector:
    kubevirt.io/domain: my-vm
  ports:
    - protocol: TCP
      port: 22
      targetPort: 22
      nodePort: 30022  # Optional, will be auto-assigned if omitted</code></pre>
</div>
</div>
</li>
<li>
<p>Check selector matches VM:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get vm my-vm -n my-namespace -o jsonpath='{.spec.template.metadata.labels}'</code></pre>
</div>
</div>
</li>
<li>
<p>Verify SSH is running in VM:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">virtctl console my-vm -n my-namespace
# Inside VM:
systemctl status sshd</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_issue_nodeport_works_but_wrong_vm"><a class="anchor" href="#_issue_nodeport_works_but_wrong_vm"></a>Issue: NodePort Works But Wrong VM</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:
SSH connects but to wrong VM or gets connection refused.</p>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Check service endpoints
oc describe svc my-vm-ssh -n my-namespace

# Look at Endpoints field - should show VM pod IP</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- Service selector matches multiple VMs
- Service selector does not match any VM</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use unique labels for service selector:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">selector:
  kubevirt.io/domain: my-vm  # Unique per VM
  # OR
  app: my-specific-vm-app</code></pre>
</div>
</div>
</li>
<li>
<p>Verify only one endpoint:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get endpoints my-vm-ssh -n my-namespace -o yaml</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_issue_cannot_determine_node_ip"><a class="anchor" href="#_issue_cannot_determine_node_ip"></a>Issue: Cannot Determine Node IP</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:
Unable to determine which node IP to use for NodePort access.</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Get node IPs
oc get nodes -o wide

# Use any node's INTERNAL-IP or EXTERNAL-IP (if available)

# Or get specific node where VM is running
VM_NODE=$(oc get vmi my-vm -n my-namespace -o jsonpath='{.status.nodeName}')
oc get node $VM_NODE -o jsonpath='{.status.addresses[?(@.type=="InternalIP")].address}'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_method_5_ssh_via_loadbalancer"><a class="anchor" href="#_method_5_ssh_via_loadbalancer"></a>Method 5: SSH via LoadBalancer</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_issue_loadbalancer_service_has_no_external_ip"><a class="anchor" href="#_issue_loadbalancer_service_has_no_external_ip"></a>Issue: LoadBalancer Service Has No External IP</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ oc get svc my-vm-ssh -n my-namespace
NAME         TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)
my-vm-ssh    LoadBalancer   172.30.x.x      &lt;pending&gt;     22:30022/TCP</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Check if LoadBalancer provider is available
oc get svc -A | grep LoadBalancer

# Check cluster has LoadBalancer support
oc describe svc my-vm-ssh -n my-namespace</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- No LoadBalancer provider configured (MetalLB, cloud provider)
- LoadBalancer quota exhausted
- LoadBalancer configuration error</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>For on-premise clusters, install <a href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html/ingress_and_load_balancing/load-balancing-with-metallb" target="_blank" rel="noopener">MetalLB</a>.</p>
</li>
<li>
<p>For cloud deployments, ensure cloud provider integration is configured</p>
</li>
<li>
<p>Check LoadBalancer events:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc describe svc my-vm-ssh -n my-namespace</code></pre>
</div>
</div>
</li>
<li>
<p>Alternative: Use NodePort instead of LoadBalancer</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_issue_loadbalancer_ip_not_reachable"><a class="anchor" href="#_issue_loadbalancer_ip_not_reachable"></a>Issue: LoadBalancer IP Not Reachable</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:
External IP assigned but SSH connection times out.</p>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Check LoadBalancer IP
LB_IP=$(oc get svc my-vm-ssh -n my-namespace -o jsonpath='{.status.loadBalancer.ingress[0].ip}')

# Try ping
ping -c 3 $LB_IP

# Check from within cluster
oc run test-curl --image=curlimages/curl --rm -it --restart=Never -- curl -v telnet://$LB_IP:22</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- LoadBalancer IP not routable
- Firewall blocking traffic
- LoadBalancer misconfiguration
- SSH not running in VM</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify LoadBalancer IP pool is correct for your network</p>
</li>
<li>
<p>Check firewall allows traffic to LoadBalancer IP</p>
</li>
<li>
<p>Verify SSH is running in VM (see Method 4 solutions)</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_method_6_ssh_via_port_forward"><a class="anchor" href="#_method_6_ssh_via_port_forward"></a>Method 6: SSH via Port Forward</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_issue_oc_port_forward_fails_to_start"><a class="anchor" href="#_issue_oc_port_forward_fails_to_start"></a>Issue: oc port-forward Fails to Start</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ oc port-forward vmi/my-vm -n my-namespace 2222:22
Error: unable to forward port</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Check VMI exists
oc get vmi my-vm -n my-namespace

# Check local port not in use
netstat -tuln | grep 2222
lsof -i :2222</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- Local port already in use
- VMI not running
- Network policy blocking port-forward</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use different local port:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc port-forward vmi/my-vm -n my-namespace 12345:22</code></pre>
</div>
</div>
</li>
<li>
<p>Kill process using the port:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Find process
lsof -ti :2222 | xargs kill -9</code></pre>
</div>
</div>
</li>
<li>
<p>Wait for VMI to be ready:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc wait --for=condition=Ready vmi/my-vm -n my-namespace</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_issue_port_forward_established_but_ssh_fails"><a class="anchor" href="#_issue_port_forward_established_but_ssh_fails"></a>Issue: Port Forward Established But SSH Fails</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ oc port-forward vmi/my-vm -n my-namespace 2222:22 &amp;
Forwarding from 127.0.0.1:2222 -&gt; 22

$ ssh -p 2222 fedora@localhost
ssh: connect to host localhost port 2222: Connection refused</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Check SSH is listening in VM
virtctl console my-vm -n my-namespace
# Inside VM:
ss -tuln | grep :22</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- SSH not running in VM
- SSH listening on different port
- VM does not have SSH installed</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install and start SSH in VM:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Inside VM via console
sudo dnf install openssh-server
sudo systemctl enable --now sshd</code></pre>
</div>
</div>
</li>
<li>
<p>Check SSH port:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Inside VM
sudo ss -tuln | grep ssh</code></pre>
</div>
</div>
</li>
<li>
<p>Check SSH configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Inside VM
sudo cat /etc/ssh/sshd_config | grep ^Port</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_issue_port_forward_disconnects_frequently"><a class="anchor" href="#_issue_port_forward_disconnects_frequently"></a>Issue: Port Forward Disconnects Frequently</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:
Port forward works but drops connection after few minutes.</p>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- Idle timeout
- API server connection timeout
- Network instability</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add keepalive to SSH connection:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ssh -o ServerAliveInterval=60 -p 2222 fedora@localhost</code></pre>
</div>
</div>
</li>
<li>
<p>Run port-forward in background with restart:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">while true; do
  oc port-forward vmi/my-vm -n my-namespace 2222:22
  sleep 5
done &amp;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_method_7_direct_access_via_secondary_network"><a class="anchor" href="#_method_7_direct_access_via_secondary_network"></a>Method 7: Direct Access via Secondary Network</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_issue_cannot_reach_vm_on_secondary_network"><a class="anchor" href="#_issue_cannot_reach_vm_on_secondary_network"></a>Issue: Cannot Reach VM on Secondary Network</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ping 192.168.100.10
Request timeout</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Check VM has secondary interface configured
oc get vmi my-vm -n my-namespace -o jsonpath='{.status.interfaces}' | jq

# Check NAD exists
oc get network-attachment-definition -n my-namespace

# Check VM network configuration
oc get vm my-vm -n my-namespace -o jsonpath='{.spec.template.spec.networks}' | jq</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- NetworkAttachmentDefinition not configured
- VM does not have secondary network interface
- Secondary network IP not configured
- Physical network not accessible
- VLAN configuration error</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify NAD is correctly configured:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc describe network-attachment-definition my-nad -n my-namespace</code></pre>
</div>
</div>
</li>
<li>
<p>Verify VM has secondary network:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spec:
  template:
    spec:
      networks:
        - name: default
          pod: {}
        - name: secondary-net
          multus:
            networkName: my-nad
      domain:
        devices:
          interfaces:
            - name: default
              masquerade: {}
            - name: secondary-net
              bridge: {}</code></pre>
</div>
</div>
</li>
<li>
<p>Check IP configuration in VM:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">virtctl console my-vm -n my-namespace
# Inside VM:
ip addr show enp2s0  # Secondary interface</code></pre>
</div>
</div>
</li>
<li>
<p>Configure static IP via cloud-init (see cloud-init IP configuration tutorial)</p>
</li>
<li>
<p>For VLAN networks, see OVS bridge verification guide</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_issue_secondary_network_interface_not_visible_in_vm"><a class="anchor" href="#_issue_secondary_network_interface_not_visible_in_vm"></a>Issue: Secondary Network Interface Not Visible in VM</h3>
<div class="paragraph">
<p><strong>Symptoms</strong>:
Only primary interface (enp1s0) visible, no enp2s0.</p>
</div>
<div class="paragraph">
<p><strong>Diagnosis</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Inside VM
ip link show

# Check from OpenShift
oc get vmi my-vm -n my-namespace -o jsonpath='{.status.interfaces}' | jq</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Common Causes</strong>:
- NAD does not exist in same namespace
- VM spec missing secondary network interface
- Multus CNI not working</p>
</div>
<div class="paragraph">
<p><strong>Solutions</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check NAD in correct namespace:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get network-attachment-definition -n my-namespace</code></pre>
</div>
</div>
</li>
<li>
<p>Verify VM spec has both network and interface defined</p>
</li>
<li>
<p>Check multus logs:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc logs -n openshift-multus -l app=multus</code></pre>
</div>
</div>
</li>
<li>
<p>Check virt-launcher pod events:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">POD=$(oc get pods -n my-namespace -l kubevirt.io/domain=my-vm -o name)
oc describe $POD -n my-namespace</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_diagnostic_commands"><a class="anchor" href="#_diagnostic_commands"></a>Diagnostic Commands</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_complete_vm_access_health_check_script"><a class="anchor" href="#_complete_vm_access_health_check_script"></a>Complete VM Access Health Check Script</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">#!/bin/bash
NAMESPACE="my-namespace"
VM_NAME="my-vm"

echo "=== VM Status ==="
oc get vm $VM_NAME -n $NAMESPACE
oc get vmi $VM_NAME -n $NAMESPACE

echo ""
echo "=== VM Pod Status ==="
oc get pods -n $NAMESPACE -l kubevirt.io/domain=$VM_NAME

echo ""
echo "=== VM IP Addresses ==="
oc get vmi $VM_NAME -n $NAMESPACE -o jsonpath='{.status.interfaces}' | jq

echo ""
echo "=== Guest Agent Status ==="
oc get vmi $VM_NAME -n $NAMESPACE -o jsonpath='{.status.guestOSInfo.id}'
echo ""

echo ""
echo "=== VM Networks ==="
oc get vm $VM_NAME -n $NAMESPACE -o jsonpath='{.spec.template.spec.networks}' | jq

echo ""
echo "=== Services for VM ==="
oc get svc -n $NAMESPACE -l kubevirt.io/domain=$VM_NAME

echo ""
echo "=== NetworkAttachmentDefinitions ==="
oc get network-attachment-definition -n $NAMESPACE

echo ""
echo "=== Recent Events ==="
oc get events -n $NAMESPACE --field-selector involvedObject.name=$VM_NAME --sort-by='.lastTimestamp' | tail -10</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_from_inside_vm_network_diagnostic_script"><a class="anchor" href="#_from_inside_vm_network_diagnostic_script"></a>From Inside VM - Network Diagnostic Script</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">#!/bin/bash
echo "=== Network Interfaces ==="
ip addr show

echo ""
echo "=== Routing Table ==="
ip route show

echo ""
echo "=== DNS Configuration ==="
cat /etc/resolv.conf

echo ""
echo "=== SSH Service Status ==="
systemctl status sshd

echo ""
echo "=== SSH Listening Ports ==="
ss -tuln | grep :22

echo ""
echo "=== Guest Agent Status ==="
systemctl status qemu-guest-agent

echo ""
echo "=== Firewall Status ==="
systemctl status firewalld 2&gt;/dev/null || echo "Firewall not active"

echo ""
echo "=== Connectivity Test ==="
ping -c 2 8.8.8.8 &amp;&amp; echo "External connectivity: OK" || echo "External connectivity: FAILED"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_access_method_comparison_troubleshooting_decision_tree"><a class="anchor" href="#_access_method_comparison_troubleshooting_decision_tree"></a>Access Method Comparison - Troubleshooting Decision Tree</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Need access to VM?
│
├─ VM not running? → virtctl start VM
│
├─ Just need console? → virtctl console
│   └─ Not working? → Check VM running, check virt-launcher pod
│
├─ Need GUI? → virtctl vnc
│   └─ Not working? → Check VNC graphics device, install VNC viewer
│
├─ Need SSH?
│   ├─ From workstation with virtctl? → virtctl ssh
│   │   └─ Not working? → Check SSH service running, SSH keys configured
│   │
│   ├─ Persistent access needed? → NodePort Service
│   │   └─ Not working? → Check service selector, NodePort number, node firewall
│   │
│   ├─ Public access needed? → LoadBalancer Service
│   │   └─ Not working? → Check LoadBalancer provider installed, IP assigned
│   │
│   ├─ Temporary access? → oc port-forward
│   │   └─ Not working? → Check local port free, VMI running, SSH in VM
│   │
│   └─ Direct network access? → Secondary Network
│       └─ Not working? → Check NAD, VM secondary interface, IP config, network routing</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_resources"><a class="anchor" href="#_additional_resources"></a>Additional Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.openshift.com/container-platform/latest/virt/vm_networking/virt-about-vm-networking.html" target="_blank" rel="noopener">OpenShift Virtualization Networking</a></p>
</li>
<li>
<p><a href="https://kubevirt.io/user-guide/virtual_machines/accessing_virtual_machines/" target="_blank" rel="noopener">KubeVirt Network Access</a></p>
</li>
<li>
<p><a href="https://kubevirt.io/user-guide/operations/virtctl_client_tool/" target="_blank" rel="noopener">Virtctl CLI Reference</a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/concepts/services-networking/service/" target="_blank" rel="noopener">Kubernetes Services</a></p>
</li>
<li>
<p><a href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html/ingress_and_load_balancing/load-balancing-with-metallb" target="_blank" rel="noopener">MetalLB</a></p>
</li>
<li>
<p><a href="cloud-init-troubleshooting.html" class="xref page">Cloud-init IP Configuration Troubleshooting</a></p>
</li>
<li>
<p><a href="../networking/ovs-bridge-troubleshooting.html" class="xref page">OVS Bridge Verification</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_test_ocplab01_cluster"><a class="anchor" href="#_example_test_ocplab01_cluster"></a>Example Test: ocplab01 Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Testing on SNO cluster (ocplab01):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ oc get vmi fedora-access-vm -n vm-access-test -o jsonpath='{.status.interfaces}' | jq
[
  {
    "infoSource": "domain, guest-agent, multus-status",
    "interfaceName": "eth0",
    "ipAddress": "10.128.0.171",
    "ipAddresses": [
      "10.128.0.171",
      "fd02::62"
    ],
    "mac": "02:92:c2:00:00:08",
    "name": "default",
    "queueCount": 1
  }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Guest agent status:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ oc get vmi fedora-access-vm -n vm-access-test -o jsonpath='{.status.guestOSInfo}' | jq
{
  "id": "fedora",
  "kernelRelease": "6.11.4-301.fc41.x86_64",
  "kernelVersion": "#1 SMP PREEMPT_DYNAMIC Thu Oct 10 16:16:06 UTC 2024",
  "name": "Fedora Linux",
  "prettyName": "Fedora Linux 41 (Cloud Edition)",
  "version": "41",
  "versionId": "41"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This confirms VM is accessible and guest agent is operational. The guest agent provides additional OS information but is not required for SSH-based access methods.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="remote-access-linux-vms.html">Remote Access to Linux VMs</a></span>
  <span class="next"><a href="remote-access-windows-vms.html">Remote Access to Windows VMs via RDP</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
